---
title: Параметры отчета в построителе отчетов Power BI
description: В этом разделе описываются распространенные варианты использования для параметров отчета Power BI Report Builder, свойства, которые можно задать, и многое другое.
ms.service: powerbi
ms.subservice: report-builder
ms.topic: conceptual
author: maggiesMSFT
ms.author: maggies
ms.reviewer: ''
ms.custom: ''
ms.date: 06/06/2019
ms.openlocfilehash: 6c0a891257ae4e768c3952398eb8303906bf2ce4
ms.sourcegitcommit: ccf53e87ff7cba1fcd9d2cca761a561e62933f90
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2020
ms.locfileid: "93297812"
---
# <a name="report-parameters-in-power-bi-report-builder"></a>Параметры отчета в построителе отчетов Power BI

[!INCLUDE [applies-to](../includes/applies-to.md)] [!INCLUDE [yes-service](../includes/yes-service.md)] [!INCLUDE [yes-paginated](../includes/yes-paginated.md)] [!INCLUDE [yes-premium](../includes/yes-premium.md)] [!INCLUDE [no-desktop](../includes/no-desktop.md)] 

В этом разделе описываются распространенные варианты использования для параметров отчета Power BI Report Builder, свойства, которые можно задать, и многое другое. Параметры отчета позволяют управлять данными отчета, объединять связанные отчеты и изменять внешний вид отчетов. Параметры отчета можно использовать в отчетах с разбивкой на страницы, созданных в построителе отчетов.

## <a name="common-uses-for-parameters"></a><a name="bkmk_Common_Uses_for_Parameters"></a> Распространенные варианты применения параметров

 Здесь представлены некоторые из распространенных вариантов применения параметров.  
  
**Управление данными отчетов с разбивкой на страницы**
  
- Фильтруйте данные отчета с разбиением на страницы в источнике данных, записывая запросы набора данных, которые содержат переменные.  
  
- Предоставьте пользователям возможность настройки данных в отчете с разбиением на станицы. Например, можно указать два параметра, задающие начальную и конечную даты для данных продаж.  
  
**Изменение формы представления отчета**
  
- Обеспечение возможности настройки внешнего вида отчета с помощью указываемых пользователями значений. Например, можно добавить параметр логического типа, определяющий, будут ли вложенные группы строк в таблице свернутыми или развернутыми.  
  
- Позвольте пользователям настраивать данные и оформление отчета, включая параметры в выражение.  
  
## <a name="viewing-a-report-with-parameters"></a><a name="UserInterface"></a> Просмотр отчета с параметрами

При просмотре отчета, имеющего параметры, на панели инструментов средства просмотра отчетов отображаются все параметры, что обеспечивает возможность интерактивного задания значений пользователем. На следующей иллюстрации показана область параметров для отчета с параметрами @ReportMonth, @ReportYear, @EmployeeID, @ShowAll, @ExpandTableRows, @CategoryQuota и @SalesDate.  

![Просмотр отчета с параметрами](media/report-builder-parameters/report-builder-parameters-power-bi-service.png "Просмотр отчета с параметрами")
  
1. **Область параметров** . На панели инструментов средства просмотра отчетов отображаются запросы и значения по умолчанию для всех параметров. Структуру параметров можно настроить в области параметров.  
  
2. **@SalesDate параметр** параметра @SalesDate имеет тип данных **DateTime**. Рядом с текстовым полем отображается запрос на выбор даты. Чтобы изменить дату, введите новую дату в текстовом поле или используйте элемент управления «календарь».  
  
3. **@ShowAll параметр** параметра @ShowAll имеет тип данных **логическое**. Воспользуйтесь переключателями, чтобы выбрать значение **True** или **False**.  
  
4. **Показать или скрыть область параметров** . На панели инструментов средства просмотра отчетов щелкните эту стрелку, чтобы отобразить или скрыть область параметров.  
  
5. **@CategoryQuota параметр** параметра @CategoryQuota имеет тип данных **Float** , поэтому он принимает числовое значение.  Параметр @CategoryQuota разрешает несколько значений.  
  
6. **Просмотреть отчет**  . На панели инструментов средства просмотра отчетов нажмите кнопку **Просмотреть отчет** , чтобы запустить отчет. Если для всех параметров заданы значения по умолчанию, то отчет запускается автоматически при первом просмотре.  
  
## <a name="creating-parameters"></a><a name="bkmk_Create_Parameters"></a> Создание параметров

Существует несколько способов создания параметров отчета.
  
> [!NOTE]
>  Не все источники данных поддерживают параметры.
  
**Запрос набора данных или хранимая процедура с параметрами**
  
 Добавить запрос набора данных, который содержит переменные или хранимую процедуру набора данных, которая содержит параметры ввода. Параметр набора данных создается для каждой переменной или параметра ввода, а параметр отчета создается для каждого параметра набора данных.  
  
![Свойства набора данных параметра построителя отчетов](media/report-builder-parameters/report-builder-parameter-dataset.png "Свойства набора данных параметра построителя отчетов")

  
 На этом изображении из построителя отчетов показаны следующие элементы.  
  
1.  Параметры отчета в области данных отчета.  
  
2.  Набор данных с параметрами.  
  
3.  Область параметров.  
  
4.  Параметры, указанные в диалоговом окне "Свойства набора данных".  
  
**Создание параметра вручную**
  
Создание параметра вручную с использованием области данных отчета. Параметры отчета можно настроить таким образом, чтобы пользователь мог интерактивно вводить значения, позволяющие настроить содержимое или внешний вид отчета. Также в настройках параметров отчета можно запретить изменение пользователями заранее заданных значений.  
  
> [!NOTE]  
>  Так как параметры управляются на сервере независимо, повторная публикация основного отчета с новыми параметрами не перезапишет существующие параметры отчета.  

### <a name="parameter-values"></a>Значения параметра

 Далее представлены параметры для выбора значений параметра в отчете.  
  
- Выберите одно значение параметра из раскрывающегося списка.  
  
- Выберите несколько значений параметра из раскрывающегося списка.  
  
- Выберите значение из раскрывающегося списка для одного параметра, которое определяет доступные значения для другого параметра в раскрывающемся списке. Это каскадные параметры. Каскадные параметры позволяют вам быстро фильтровать значения параметров из тысяч значений в управляемое количество. Дополнительные сведения см. в статье [Каскадные параметры в отчетах с разбивкой на страницы](../guidance/paginated-report-cascading-parameter.md).
  
- Запустите выполнение отчета без предварительного выбора значения параметра, так как для параметра было создано значение по умолчанию.  
  
## <a name="report-parameter-properties"></a><a name="bkmk_Report_Parameters"></a> Свойства параметров отчета

 Вы можете изменять свойства параметров отчета, используя диалоговое окно Параметры отчета. В следующей таблице перечислены свойства, которые можно указать для каждого параметра:  
  
|Свойство|Описание|  
|--------------|-----------------|  
|Имя|Введите имя параметра с учетом регистра. Имя должно начинаться с буквы и может содержать буквы, цифры и подчеркивание (_). Имя не может содержать пробелы. Для автоматически создаваемых параметров имя соответствует параметру в запросе набора данных. По умолчанию для создаваемых вручную параметров используются имена вида ReportParameter1.|  
|prompt|Текст, отображаемый рядом с параметром на панели инструментов средства просмотра отчетов.|  
|Тип данных|Параметр отчета должен иметь один из следующих типов данных:<br /><br /> **Boolean**. Пользователь выбирает значение True или False из переключателя.<br /><br /> **DateTime**. Пользователь выбирает дату из элемента управления «календарь».<br /><br /> **Integer**. Пользователь вводит значения в текстовое поле.<br /><br /> **Float**. Пользователь вводит значения в текстовое поле.<br /><br /> **Text**. Пользователь вводит значения в текстовое поле.<br /><br /> При задании для параметра доступных значений пользователь выбирает значения из раскрывающегося списка, даже если тип данных — **DateTime**.|  
|Разрешить пустое значение|Установите этот параметр, если значение параметра может быть пустой строкой или пустым значением.<br /><br /> Если при указании допустимых значений параметра необходимо также разрешить ввод пустого значения, то пустое значение необходимо явно включить в число задаваемых. При выборе этого параметра пустое значение не включается автоматически в перечень доступных значений.|  
|Разрешить значение NULL|Выберите этот параметр, если значением параметра может быть NULL.<br /><br /> Если при указании допустимых значений параметра необходимо также разрешить ввод значения NULL, то значение NULL необходимо явно включить в число задаваемых. При выборе этого параметра значение NULL не включается автоматически в перечень доступных значений.|  
|Разрешить несколько значений|Укажите доступные значения, чтобы создать раскрывающийся список, в котором пользователи смогут выбирать значения. Это оптимальный вариант, позволяющий обеспечить включение в запрос набора данных только допустимых значений.<br /><br /> Выберите этот параметр, если значением для параметра могут стать несколько значений, отображаемые в раскрывающемся списке. Значения NULL не разрешены. Если выбран этот параметр, в раскрывающемся списке параметров к списку доступных значений добавляются флажки. В верхней части списка имеется флажок **Выбрать все**. Пользователи могут устанавливать флажки для необходимых значений.<br /><br /> При быстром изменении данных, используемых для указания значений, в отображаемом списке пользователь может увидеть не самые последние значения.|  
|Видимый|Выберите этот параметр, чтобы отобразить параметр отчета в верхней части отчета при его выполнении. Этот параметр позволяет пользователям выбирать значения параметра во время выполнения.|  
|Скрытый|Выберите этот параметр, чтобы скрыть параметр отчета в опубликованном отчете. Значения параметра отчета еще можно задать в URL-адресе отчета, в определении подписки или на сервере отчетов.|  
|Внутренние|Выберите этот параметр, чтобы скрыть параметр отчета. В опубликованном отчете этот параметр отчета можно будет просмотреть только в определении отчета.|  
|Доступные значения|При наличии у параметра заданных доступных значений, допустимые значения всегда отображаются в виде раскрывающегося списка. Например, при указании доступных значений для параметра типа **DateTime** на панели параметра отображается раскрывающийся список дат, а не элемент управления "календарь".<br /><br /> Чтобы обеспечить согласование списка значений в отчете и вложенных отчетах, можно настроить параметр источника данных для использования одной транзакции во всех запросах в наборах данных, связанных с источником данных.<br /><br /> **Примечание о безопасности**. Во всех отчетах, содержащих параметры с типом данных **Text** , используйте список доступных значений (также называемый списком допустимых значений) и убедитесь, что у любого пользователя, выполняющего отчет, есть разрешения только на просмотр данных в отчете.|  
|Значения по умолчанию|Задание значений по умолчанию с помощью запроса или статического списка.<br /><br /> При наличии у всех параметров значений по умолчанию отчет запускается автоматически при первом просмотре.|  
|Продвинутый уровень|Задайте атрибут определения отчета **UsedInQuery** , значение, указывающее, влияет этот параметр на данные отчета напрямую или косвенно.<br /><br /> **Автоматически определять необходимость обновления**<br /> Выберите этот параметр, если нужно, чтобы это значение определил обработчик отчетов. Значение равно **True** , если обработчик отчетов обнаруживает запрос набора данных с прямой или косвенной ссылкой на этот параметр или если у отчета есть вложенные отчеты.<br /><br /> **Всегда обновлять**<br /> Выберите данный параметр, когда параметр отчета используется прямо или косвенно в запросе набора данных или в выражении параметра. Этот параметр устанавливает **UsedInQuery** в значение True.<br /><br /> **Не обновлять**<br /> Выберите данный параметр, когда параметр отчета не используется прямо или косвенно в запросе набора данных или в выражении параметра. Этот параметр устанавливает **UsedInQuery** в значение False.<br /><br /> **Внимание!** Параметр **Не обновлять** следует использовать осторожно. На сервере отчетов значение **UsedInQuery** позволяет управлять режимами кэша для данных отчета и подготовленных отчетов и настройками параметров для отчетов-снимков. Если параметр **Не обновлять** задан неверно, это может привести к ошибкам в данных отчета или кэшируемых отчетах, а также к несогласованности данных в отчетах-снимках. |  
  
##  <a name="dataset-query"></a><a name="bkmk_Dataset_Parameters"></a> Запрос набора данных  
 Чтобы отфильтровать данные в запросе набора данных, можно включить предложение ограничения, ограничивающее данные путем указания значений, которые нужно включить в результирующий набор или исключить из него.  
  
 Используйте конструктор запросов для источника данных, чтобы помочь построить параметризованный запрос.  
  
-   В запросах Transact-SQL различные источники данных поддерживают различный синтаксис параметров. Поддерживаются диапазоны параметров, определяемые в запросе по положению или по имени. Чтобы создать параметризованный запрос, в конструкторе реляционных запросов нужно выбрать режим параметров для фильтра.   
  
-   Для запросов, основанных на многомерном источнике данных, таком как Microsoft SQL Server Analysis Services, можно указать, следует ли создавать параметр на основе фильтра, указанного в конструкторе запросов. 
  
##  <a name="parameter-management-for-a-published-report"></a><a name="bkmk_Manage_Parameters"></a> Управление параметрами для опубликованного отчета  
 При разработке отчета параметры отчета сохраняются в определении отчета. При публикации отчета сохранение параметров отчета и управление ими осуществляется отдельно от определения отчета.  
  
 Для опубликованного отчета можно использовать следующее.  
  
-   **Свойства параметров отчета.** Изменить значения параметров отчета напрямую на сервере отчетов, независимо от определения отчета.  
  
-   **Подписки на отчет.** Можно указывать значения параметров для фильтрации данных и доставлять отчеты по подпискам. 
  
 При повторной публикации определения отчета свойства параметров для опубликованного отчета сохраняются. Если определение отчета повторно публикуется как тот же отчет, а имена параметров и типы данных не изменяются, то параметры свойств сохраняются. При добавлении или удалении параметров из определения отчета, а также при изменении типа данных или имени существующего параметра, возможно, в опубликованном отчете потребуется изменить свойства соответствующего параметра.  
  
 Не все параметры можно изменять всегда. Если параметр отчета получает значение по умолчанию от запроса набора данных, это значение не может быть изменено для опубликованного отчета и не может быт изменено на сервере отчетов. Значение, применяемое во время выполнения, определяется при выполнении запроса либо при вычислении этого выражения для параметров на основе выражения.  
  
 Параметры выполнения отчета могут влиять на обработку параметров. В отчете, который выполняется как моментальный снимок, нельзя использовать параметры, полученные из запроса, если только запрос не содержит значения по умолчанию для этих параметров.  
  
##  <a name="parameters-for-a-subscription"></a><a name="bkmk_Parameters_Subscription"></a> Параметры подписки  
 Можно определить подписку на отчет по запросу или на моментальный снимок и указать значения параметров для использования в процессе обработки подписки.  
  
-   **Отчет по запросу.**  Для отчета по запросу каждому из указанных для отчета параметров можно задать значение, отличное от опубликованного. Например, предположим, что имеется отчет службы обработки запросов, который использует параметр *Период времени* для возвращения запросов клиентской службы на текущий день, неделю или месяц. Если значение параметра по умолчанию для отчета установлено на **сегодня** , ваша подписка может использовать другое значение параметра (такое как **неделя** или **месяц** ) для создания отчета, содержащего цифры за неделю или месяц.  
  
## <a name="next-steps"></a>Дальнейшие действия

- [Сведения об отчетах с разбивкой на страницы в Power BI Premium](paginated-reports-report-builder-power-bi.md)  
- [Каскадные параметры в отчетах с разбивкой на страницы](../guidance/paginated-report-cascading-parameter.md)
